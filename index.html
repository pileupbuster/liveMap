<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ham Radio Queue System - EI6JGB</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="public/css/style.css">
</head>
<body>
    <div class="container">
        <!-- Top Header -->
        <header class="top-header">
            <div class="logo-section">
                <img src="./public/images/ei6jgb-pileupbuster.png" alt="EI6JGB PileupBuster" class="logo-image">
            </div>
            <div class="frequency-section">
                <div class="frequency-value">14,121.00</div>
                <div class="frequency-unit">MHz</div>
            </div>
            <div class="clock-section">
                <div class="clock" id="clock">14:18</div>
            </div>
        </header>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Map Section -->
            <div class="map-section">
                <div id="map" class="map-container"></div>
            </div>

            <!-- Sidebar -->
            <aside class="sidebar">
                <!-- Current Operator -->
                <div class="current-operator-section">
                    <div class="current-operator-card">
                        <img src="https://i.pravatar.cc/200?img=68" alt="EI6LF" class="current-operator-image">
                        <div class="current-operator-info">
                            <h2 class="current-callsign">EI6LF</h2>
                            <p class="current-name">Brian Keating</p>
                            <p class="current-location">Worked from Preubader</p>
                        </div>
                    </div>
                </div>

                <!-- Queue Stats -->
                <div class="queue-stats">
                    <div class="stat-item">
                        <span class="stat-label">In Queue</span>
                        <span class="stat-value">4</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Worked</span>
                        <span class="stat-value">5</span>
                    </div>
                </div>
            </aside>
        </div>

        <!-- Bottom Queue Bar -->
        <div class="bottom-queue">
            <div class="queue-card">
                <img src="https://i.pravatar.cc/150?img=14" alt="ON8EI" class="queue-image">
                <div class="queue-info">
                    <h3 class="queue-callsign">ON8EI</h3>
                    <p class="queue-location">Belgium</p>
                    <p class="queue-time">00:05</p>
                </div>
            </div>
            <div class="queue-card">
                <img src="https://i.pravatar.cc/150?img=16" alt="W2RE" class="queue-image">
                <div class="queue-info">
                    <h3 class="queue-callsign">W2RE</h3>
                    <p class="queue-location">United States</p>
                    <p class="queue-time">00:15</p>
                </div>
            </div>
            <div class="queue-card">
                <img src="https://i.pravatar.cc/150?img=7" alt="ET2II" class="queue-image">
                <div class="queue-info">
                    <h3 class="queue-callsign">ET2II</h3>
                    <p class="queue-location">Ireland</p>
                    <p class="queue-time">00:25</p>
                </div>
            </div>
            <div class="queue-card">
                <img src="https://i.pravatar.cc/150?img=20" alt="EI5JBB" class="queue-image">
                <div class="queue-info">
                    <h3 class="queue-callsign">EI5JBB</h3>
                    <p class="queue-location">Ireland</p>
                    <p class="queue-time">00:48</p>
                </div>
            </div>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        // Operator data
        const operators = [
            {
                callsign: 'W1ABC',
                name: 'John Smith',
                location: 'Boston, MA, USA',
                coordinates: { lat: 42.3601, lon: -71.0589 },
                gridSquare: 'FN42',
                profileImage: 'https://i.pravatar.cc/150?img=12',
                contactTime: '2024-01-30T14:30:00Z',
                status: 'worked'
            },
            {
                callsign: 'K2DEF',
                name: 'Sarah Johnson',
                location: 'New York, NY, USA',
                coordinates: { lat: 40.7128, lon: -74.0060 },
                gridSquare: 'FN30',
                profileImage: 'https://i.pravatar.cc/150?img=5',
                contactTime: '2024-01-30T14:25:00Z',
                status: 'worked'
            },
            {
                callsign: 'W3GHI',
                name: 'Mike Davis',
                location: 'Philadelphia, PA, USA',
                coordinates: { lat: 39.9526, lon: -75.1652 },
                gridSquare: 'FM29',
                profileImage: 'https://i.pravatar.cc/150?img=8',
                contactTime: '2024-01-30T14:20:00Z',
                status: 'worked'
            },
            {
                callsign: 'N4JKL',
                name: 'Emily Wilson',
                location: 'Atlanta, GA, USA',
                coordinates: { lat: 33.7490, lon: -84.3880 },
                gridSquare: 'EM73',
                profileImage: 'https://i.pravatar.cc/150?img=9',
                contactTime: '2024-01-30T14:15:00Z',
                status: 'worked'
            },
            {
                callsign: 'W5MNO',
                name: 'Robert Brown',
                location: 'Dallas, TX, USA',
                coordinates: { lat: 32.7767, lon: -96.7970 },
                gridSquare: 'EM12',
                profileImage: 'https://i.pravatar.cc/150?img=3',
                contactTime: '2024-01-30T14:10:00Z',
                status: 'worked'
            },
            {
                callsign: 'K6PQR',
                name: 'Lisa Chen',
                location: 'San Francisco, CA, USA',
                coordinates: { lat: 37.7749, lon: -122.4194 },
                gridSquare: 'CM87',
                profileImage: 'https://i.pravatar.cc/150?img=1',
                contactTime: '2024-01-30T14:05:00Z',
                status: 'current'
            },
            {
                callsign: 'ON8EI',
                name: 'Erik Janssen',
                location: 'Belgium',
                coordinates: { lat: 47.6062, lon: -122.3321 },
                gridSquare: 'CN87',
                profileImage: 'https://i.pravatar.cc/150?img=14',
                contactTime: '2024-01-30T14:00:00Z',
                status: 'queue',
                waitTime: '00:05'
            },
            {
                callsign: 'W2RE',
                name: 'Ray Anderson',
                location: 'United States',
                coordinates: { lat: 62.4540, lon: -114.3718 },
                gridSquare: 'EP21',
                profileImage: 'https://i.pravatar.cc/150?img=16',
                contactTime: '2024-01-30T13:55:00Z',
                status: 'queue',
                waitTime: '00:15'
            },
            {
                callsign: 'ET2II',
                name: 'Mohammed Ali',
                location: 'Ireland',
                coordinates: { lat: 41.8781, lon: -87.6298 },
                gridSquare: 'EN61',
                profileImage: 'https://i.pravatar.cc/150?img=7',
                contactTime: '2024-01-30T13:50:00Z',
                status: 'queue',
                waitTime: '00:25'
            },
            {
                callsign: 'EI5JBB',
                name: 'James Burke',
                location: 'Ireland',
                coordinates: { lat: 39.7392, lon: -104.9903 },
                gridSquare: 'DM79',
                profileImage: 'https://i.pravatar.cc/150?img=20',
                contactTime: '2024-01-30T13:45:00Z',
                status: 'queue',
                waitTime: '00:48'
            }
        ];

        // Initialize map with darker tiles
        const map = L.map('map').setView([45, -93], 4);
        
        // Using Stadia Maps Alidade Smooth Dark with API key
        L.tileLayer('https://tiles.stadiamaps.com/tiles/alidade_smooth_dark/{z}/{x}/{y}{r}.png?api_key=21ff9858-9e51-49fb-91eb-e587a86105e9', {
            attribution: '© <a href="https://www.stadiamaps.com/" target="_blank">Stadia Maps</a> © <a href="https://openmaptiles.org/" target="_blank">OpenMapTiles</a> © <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
            retina: '@2x',
            maxZoom: 20
        }).addTo(map);

        // Add operators to map
        operators.forEach(operator => {
            if (operator.coordinates) {
                let className = 'worked';
                if (operator.status === 'queue') className = 'queue';
                if (operator.status === 'current') className = 'current';
                
                const icon = L.divIcon({
                    html: `<div class="marker-avatar ${className}"><img src="${operator.profileImage}" alt="${operator.callsign}" /></div>`,
                    iconSize: [60, 60],
                    iconAnchor: [30, 30],
                    popupAnchor: [0, -30],
                    className: 'custom-marker'
                });
                
                const marker = L.marker([operator.coordinates.lat, operator.coordinates.lon], { icon })
                    .addTo(map)
                    .bindPopup(`
                        <div class="map-popup">
                            <strong>${operator.callsign}</strong><br>
                            ${operator.name}<br>
                            ${operator.location}
                        </div>
                    `);
            }
        });

        // Update clock
        function updateClock() {
            const now = new Date();
            const hours = String(now.getUTCHours()).padStart(2, '0');
            const minutes = String(now.getUTCMinutes()).padStart(2, '0');
            document.getElementById('clock').textContent = `${hours}:${minutes}`;
        }
        
        updateClock();
        setInterval(updateClock, 1000);
    </script>
</body>
</html>